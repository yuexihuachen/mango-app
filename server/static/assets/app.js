import{f as k,r as L,c as E,n as q,a as T,u as A,b as O,d as $,e as D,g as f,h as y,i as u,j as e,O as J,k as Q,l as v,m as B,o as M,p as W,P as z,R as F}from"./vendor.js";const H=k({baseUrl:"/",prepareHeaders:t=>{const s=q();return t.set("X-Request-ID",s),t}}),U=L(H,{maxRetries:2}),h=E({reducerPath:"splitApi",baseQuery:U,tagTypes:["Category","PostList","Post","Categories"],endpoints:()=>({})}),G={category:{},post:{}},g=T({name:"header",initialState:G,reducers:{saveCategory:(t,s)=>(t.category=s.payload,t),savePost:(t,s)=>(t.post=s.payload,t)},selectors:{selectCategory:t=>t.category,selectPost:t=>t.post}}),{saveCategory:X,savePost:K}=g.actions,{selectCategory:V,selectPost:j}=g.selectors,Y=g.reducer,Z=t=>D({reducer:{[h.reducerPath]:h.reducer,header:Y},middleware:s=>s().concat(h.middleware),...t}),ee=Z(),b=A.withTypes(),x=O.withTypes();$.withTypes();const te="/logo.svg";function se(){const t=f(),n=y().id||"JavaScript",d=document.getElementById("categories"),c=JSON.parse(d.value).sort((a,m)=>a.order-m.order),p=b();u.useLayoutEffect(()=>{sessionStorage.setItem("category",JSON.stringify(c.find(a=>a.name===n)))},[]);const o=a=>{p(X(a)),t(`/${a.name}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"z-[101] lg:border-b bg-white sticky top-0",children:e.jsxs("header",{className:"sticky top-0 flex m-auto bg-white max-w-screen-2xl lg:px-8",children:[e.jsxs("div",{className:"flex items-center w-[19rem] py-4",children:[e.jsx("img",{src:te,alt:"Logo",className:"w-7 h-7 text-gradient-to-r from-purple-500 to-pink-500",width:28,height:28}),e.jsx("a",{href:"/",className:"pl-2 text-xl font-bold text-slate-900",children:"星辰大海"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("nav",{className:"h-full text-base font-medium leading-6 text-slate-700",children:e.jsx("ul",{className:"flex items-center h-full space-x-8",children:c.map(a=>e.jsx("li",{onClick:()=>o(a),className:`inline-flex items-center h-full border-b-2 cursor-pointer hover:text-purple-700 ${n===a.name?"border-purple-700 text-purple-700":"hover:border-purple-700 border-b-white"}`,children:a.alias},a._id))})})})]})})})}function re(){return e.jsxs(e.Fragment,{children:[e.jsx(se,{}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"px-4 m-auto max-w-screen-2xl md:px-8",children:e.jsx(J,{})})})]})}const ae=h.injectEndpoints({endpoints:t=>({getPostInfo:t.query({query:()=>"post/find"}),postInfo:t.mutation({query:s=>({url:"post/find",method:"POST",body:s}),invalidatesTags:["PostList"]})})}),{useGetPostInfoQuery:de,usePostInfoMutation:w}=ae,oe="/search.svg";function ne(){const t=y(),s=f(),n=Q(),[d]=v(),c=x(V),p=x(j),o=d.get("id")||p._id,a=b(),[m,N]=u.useState(""),[P,S]=u.useState([]),[I]=w();u.useEffect(()=>{(async()=>{let i={_id:0};c&&c._id?i=c:i=JSON.parse(sessionStorage.getItem("category")||"");const l=await I({query:{categoryId:i==null?void 0:i._id,published:1},options:{_id:1,title:1,published:1,categoryId:1}});S(l==null?void 0:l.data),a(K(l==null?void 0:l.data[0]))})()},[t.id]);const _=r=>{N(r)},C=r=>r.length?r.filter(l=>l.title.includes(m)):[],R=r=>{const i=n.pathname.length>1?n.pathname:"JavaScript";s(`${i}?id=${r._id}`)};return e.jsxs("nav",{id:"nav",className:"lg:text-sm lg:leading-6",children:[e.jsxs("div",{className:"sticky top-0 -ml-0.5",children:[e.jsx("div",{className:"h-6 bg-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("img",{src:oe,alt:"search Logo",width:16,height:16})}),e.jsx("input",{type:"text",value:m,onChange:r=>_(r.target.value),className:"block w-full rounded-md border-0 py-1.5 pl-9 pr-20 shadow-sm ring-1 ring-inset ring-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-700"})]}),e.jsx("div",{className:"bg-gradient-to-b from-white"})]}),e.jsx("ul",{children:C(P).map(r=>e.jsx("li",{className:"mt-2",children:e.jsx("div",{onClick:()=>R(r),className:`truncate text-base px-6 py-2 rounded text-slate-700 font-medium ${o===r._id?"bg-purple-100":"hover:bg-purple-50"}`,children:r.title})},r._id))})]})}function ce(){const[t]=v(),s=x(j),n=t.get("id")||s._id,d=u.useRef(null),[c]=w();return u.useEffect(()=>{async function p(){const o=await c({query:{_id:n||s._id},options:{_id:1,title:1,categoryId:1,published:1,content:1}});d.current&&(o!=null&&o.data.length)&&(d.current.innerHTML=B.parse(decodeURIComponent((o==null?void 0:o.data[0].content)||"")))}p()},[n]),e.jsx("section",{children:e.jsx("div",{className:`
      prose
      prose-slate
      prose-h2:mt-0
      prose-h3:mt-0
      prose-h4:mt-0
      max-w-full
      prose-code:rounded-md
      prose-code:before:content-none 
      prose-code:after:content-none
      prose-p:before:content-none 
      prose-p:after:content-none
      prose-hr:my-4
      `,ref:d})})}const ie=M([{path:"/",element:e.jsx(re,{}),errorElement:e.jsx("div",{children:"error"}),children:[{path:"/:id?",element:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:block fixed w-[20.2666rem] inset-0 z-20  top-[3.8125rem] left-[max(0px,calc(50%-48rem))] right-auto pb-10 pl-8 pr-6 overflow-y-auto",children:e.jsx(ne,{})}),e.jsx("div",{className:"lg:pl-[20.8rem]",children:e.jsx("main",{className:"relative z-20 max-w-3xl pt-10 xl:max-w-none  h-[calc(100vh-61px)] overflow-y-auto",children:e.jsx(ce,{})})})]})}]}]);W(document.getElementById("root")).render(e.jsx(u.StrictMode,{children:e.jsx(z,{store:ee,children:e.jsx(F,{router:ie})})}));
