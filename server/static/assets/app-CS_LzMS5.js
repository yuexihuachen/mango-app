import{f as w,r as P,c as S,n as I,a as R,u as p,b as h,d as l,j as e,O as k,e as L,g as x,m as E,h as _,i as C,P as q,R as J}from"./vendor-CAAj8L8J.js";const O=w({baseUrl:"/",prepareHeaders:(s,{getState:r})=>{const n=r();console.log(n);const i=I();return s.set("X-Request-ID",i),s}}),Q=P(O,{maxRetries:2}),u=S({reducerPath:"splitApi",baseQuery:Q,tagTypes:["Category","PostList","Post","Categories"],endpoints:()=>({})}),$=s=>R({reducer:{[u.reducerPath]:u.reducer},middleware:r=>r().concat(u.middleware),...s}),A=$(),B="/logo.svg";function M(){const s=p(),n=h().id||"JavaScript",i=document.getElementById("categories"),d=JSON.parse(i.value);l.useLayoutEffect(()=>{sessionStorage.setItem("category",JSON.stringify(d))},[]);const a=o=>{sessionStorage.setItem("category",JSON.stringify(o)),s(`/${o.name}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"z-[101] lg:border-b bg-white sticky top-0",children:e.jsxs("header",{className:"sticky top-0 flex m-auto bg-white max-w-screen-2xl lg:px-8",children:[e.jsxs("div",{className:"flex items-center w-[19rem] py-4",children:[e.jsx("img",{src:B,alt:"Logo",className:"w-7 h-7 text-gradient-to-r from-purple-500 to-pink-500",width:28,height:28}),e.jsx("a",{href:"/",className:"pl-2 text-xl font-bold text-slate-900",children:"星辰大海"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("nav",{className:"h-full text-base font-medium leading-6 text-slate-700",children:e.jsx("ul",{className:"flex items-center h-full space-x-8",children:d.map(o=>e.jsx("li",{onClick:()=>a(o),className:`inline-flex items-center h-full border-b-2 cursor-pointer hover:text-purple-700 ${n===o.name?"border-purple-700 text-purple-700":"hover:border-purple-700 border-b-white"}`,children:o.alias},o._id))})})})]})})})}function T(){return e.jsxs(e.Fragment,{children:[e.jsx(M,{}),e.jsx("div",{className:"overflow-hidden",children:e.jsx("div",{className:"px-4 m-auto max-w-screen-2xl md:px-8",children:e.jsx(k,{})})})]})}const W=u.injectEndpoints({endpoints:s=>({getPostInfo:s.query({query:()=>"post/find"}),postInfo:s.mutation({query:r=>({url:"post/find",method:"POST",body:r}),invalidatesTags:["PostList"]})})}),{useGetPostInfoQuery:G,usePostInfoMutation:g}=W,z="/search.svg";function D(){const s=h(),r=p(),n=L(),[i]=x(),d=s.id||"JavaScript",[a,o]=l.useState(""),[f,v]=l.useState([]),[j]=g();l.useEffect(()=>{(async()=>{let c={_id:0};sessionStorage.getItem("category")&&(c=JSON.parse(sessionStorage.getItem("category")||""));const m=await j({query:{categoryId:c==null?void 0:c._id}});v(m==null?void 0:m.data)})()},[d]);const y=t=>{o(t)},b=t=>t.length?t.filter(m=>m.title.includes(a)):[],N=t=>{const c=n.pathname.length>1?n.pathname:"JavaScript";r(`${c}?id=${t._id}`)};return e.jsxs("nav",{id:"nav",className:"lg:text-sm lg:leading-6",children:[e.jsxs("div",{className:"sticky top-0 -ml-0.5",children:[e.jsx("div",{className:"h-6 bg-white"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3",children:e.jsx("img",{src:z,alt:"search Logo",width:16,height:16})}),e.jsx("input",{type:"text",value:a,onChange:t=>y(t.target.value),className:"block w-full rounded-md border-0 py-1.5 pl-9 pr-20 shadow-sm ring-1 ring-inset ring-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-purple-700"})]}),e.jsx("div",{className:"bg-gradient-to-b from-white"})]}),e.jsx("ul",{children:b(f).map(t=>e.jsx("li",{className:"mt-2",children:e.jsx("div",{onClick:()=>N(t),className:`truncate text-base px-6 py-2 rounded text-slate-700 font-medium ${i.get("id")===t._id?"bg-purple-100":"hover:bg-purple-50"}`,children:t.title})},t._id))})]})}function F(){const[s]=x(),r=s.get("id"),n=l.useRef(null),[i]=g();return l.useEffect(()=>{async function d(){const a=await i({query:{_id:r},options:{_id:1,title:1,categoryId:1,published:1,content:1}});n.current&&(a!=null&&a.data.length)&&(n.current.innerHTML=E.parse(decodeURIComponent((a==null?void 0:a.data[0].content)||"")))}d()},[r]),e.jsx("section",{children:e.jsx("div",{className:`
      prose
      prose-slate
      prose-h2:mt-0
      prose-h3:mt-0
      prose-h4:mt-0
      max-w-full
      prose-code:rounded-md
      prose-code:before:content-none 
      prose-code:after:content-none
      prose-p:before:content-none 
      prose-p:after:content-none
      prose-hr:my-4
      `,ref:n})})}const H=_([{path:"/",element:e.jsx(T,{}),errorElement:e.jsx("div",{children:"error"}),children:[{path:"/:id?",element:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:block fixed w-[20.2666rem] inset-0 z-20  top-[3.8125rem] left-[max(0px,calc(50%-48rem))] right-auto pb-10 pl-8 pr-6 overflow-y-auto",children:e.jsx(D,{})}),e.jsx("div",{className:"lg:pl-[20.8rem]",children:e.jsx("main",{className:"relative z-20 max-w-3xl pt-10 xl:max-w-none  h-[calc(100vh-61px)] overflow-y-auto",children:e.jsx(F,{})})})]})}]}]);C(document.getElementById("root")).render(e.jsx(l.StrictMode,{children:e.jsx(q,{store:A,children:e.jsx(J,{router:H})})}));
