{"version":3,"file":"static/js/async/src_pages_signin_signin_tsx.js","sources":["/Users/wangl577/Documents/project/mango-app/src/components/modal/modal.tsx","/Users/wangl577/Documents/project/mango-app/src/pages/signin/signin.tsx"],"sourcesContent":["export default function Modal(props) {\n  const { title, content, open, onOk, onCancel } = props;\n  return (\n    <div className={`relative z-10 ${open ? '' : 'hidden'}`}>\n      <div className=\"fixed inset-0 transition-opacity bg-gray-500/20\"></div>\n      <div className=\"fixed inset-0 z-10 w-screen overflow-y-auto\">\n        <div className=\"flex items-end justify-center min-h-full p-4 text-center sm:items-center sm:p-0\">\n          <div className=\"relative overflow-hidden text-left transition-all transform bg-white rounded-lg shadow-xl sm:my-8 sm:w-full sm:max-w-lg\">\n            <div className=\"px-4 pt-5 pb-4 bg-white sm:p-6 sm:pb-4\">\n              <div className=\"sm:flex sm:items-start\">\n                <div className=\"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left\">\n                  <h3 className=\"text-base font-semibold text-gray-900\">\n                    {title}\n                  </h3>\n                  <div className=\"mt-2\">\n                    <p className=\"text-sm text-gray-500\">{content}</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"px-4 py-3 bg-gray-50 sm:flex sm:flex-row-reverse sm:px-6\">\n              {onOk && (\n                <button\n                  type=\"button\"\n                  onClick={onOk}\n                  className=\"inline-flex justify-center w-full px-3 py-2 text-sm font-semibold text-white bg-indigo-600 rounded-md shadow-xs hover:bg-indigo-500 sm:ml-3 sm:w-auto\"\n                >\n                  Ok\n                </button>\n              )}\n              {onCancel && (\n                <button\n                  type=\"button\"\n                  onClick={onCancel}\n                  className=\"inline-flex justify-center w-full px-3 py-2 mt-3 text-sm font-semibold text-gray-900 bg-white rounded-md shadow-xs ring-1 ring-gray-300 ring-inset hover:bg-gray-50 sm:mt-0 sm:w-auto\"\n                >\n                  Cancel\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import { useState } from 'react';\nimport httpRequest from '~/lib/httpClient';\nimport Cookies from 'js-cookie';\nimport { Response, SigninData} from '~/types/common';\nimport { redirect, useNavigate } from 'react-router';\nimport Modal from '~/components/modal/modal';\n\nconst Signin = () => {\n  const navigator = useNavigate();\n  const [name, setName] = useState('');\n  const [pwd, setPwd] = useState('');\n  const [open, setOpen] = useState(false)\n\n  const onOk = () => {\n    setOpen(false)\n  }\n\n  const login = async () => {\n    const res = await httpRequest.post(`${process.env.API_URL}/login`, {\n      username: name,\n      password: pwd,\n    }) as Response<SigninData>;\n    if (res?.code === 0) {\n      Cookies.set('at', res.data.at, { expires: 1 });\n      Cookies.set('rt', res.data.rt, { expires: 7 });\n      if (document.referrer) {\n        redirect(document.referrer)\n      }\n      navigator('/note')\n    } else {\n      setOpen(true)\n    }\n  };\n\n  return (\n    <>\n      <div className=\"flex flex-col justify-center flex-1 min-h-full px-6 py-12 lg:px-8\">\n        <div className=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n          <img\n            width={40}\n            height={40}\n            className=\"w-10 h-10 mx-auto\"\n            alt=\"logo\"\n            src=\"/logo-home.svg\"\n          />\n          <h2 className=\"mt-10 font-bold tracking-tight text-center text-gray-900 text-2xl/9\">\n            账号登录\n          </h2>\n        </div>\n\n        <div className=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n          <div className=\"space-y-6\">\n            <div>\n              <label\n                htmlFor=\"username\"\n                className=\"block font-medium text-gray-900 text-sm/6\"\n              >\n                用户名:\n              </label>\n              <div className=\"mt-2\">\n                <input\n                  id=\"username\"\n                  name=\"username\"\n                  type=\"text\"\n                  onChange={(e) => setName(e.target.value)}\n                  autoComplete=\"username\"\n                  value={name}\n                  className=\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <div className=\"flex items-center justify-between\">\n                <label\n                  htmlFor=\"password\"\n                  className=\"block font-medium text-gray-900 text-sm/6\"\n                >\n                  密码:\n                </label>\n                <div className=\"text-sm\">\n                  <a\n                    href=\"#\"\n                    className=\"font-semibold text-indigo-600 hover:text-indigo-500\"\n                  >\n                    忘记密码\n                  </a>\n                </div>\n              </div>\n              <div className=\"mt-2\">\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  onChange={(e) => setPwd(e.target.value)}\n                  type=\"password\"\n                  value={pwd}\n                  autoComplete=\"current-password\"\n                  className=\"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <button\n                type=\"submit\"\n                onClick={login}\n                className=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n              >\n                登录\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Modal {...{ \n        open, \n        ...{ content: '登录异常' },\n        onOk\n        }} />\n    </>\n  );\n};\n\nexport default Signin;\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;;AACA;AAAA;;;;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;;AACA;AAAA;AACA;AAAA;AACA;AAAA;;AACA;AAAA;AACA;;;;;;AAEA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;AAAA;;AACA;AAEA;AACA;AACA;AACA;;;;;;AAIA;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;AA7CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AAEA;AACA;AAEA;;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AAAA;;AACA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAEA;AAAA;AAAA;;;;;;;;;;;;AAKA;AAAA;AACA;AAAA;;AACA;;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAKA;;AACA;AAAA;;AACA;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAKA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOA;AACA;AACA;AAAA;AAAA;AACA;;;;;;;;AAIA;AAlHA;;AACA;;;AADA;AAoHA"}