{"version":3,"file":"static/js/async/src_components_view-note_viewNote_tsx.js","sources":["/Users/wangl577/Documents/project/mango-app/src/components/view-note/viewNote.tsx"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport useFetch from '~/hooks/useFetch';\nimport * as marked from 'marked';\nimport { useAppSelector } from '~/hooks';\n\nfunction ViewNote() {\n  const { data } = useFetch('/category/find');\n  const markdownRef = useRef(null);\n  const [category, setCagetory] = useState<string>('');\n  const [title, setTitle] = useState<string>('');\n  const [published, setPublished] = useState<number>(0);\n  const currentNote = useAppSelector(state => state.note.currentNote);\n\n  useEffect(() => {\n    if (currentNote) {\n        setTitle(currentNote.title)\n        setCagetory(currentNote.category || '0')\n        const deContent = decodeURIComponent(currentNote.content as string)\n        markdownRef.current.innerHTML = marked.parse(deContent);\n        setPublished(currentNote.published)\n    }\n  }, [currentNote])\n\n  return (\n    <>\n      <div className=\"grid grid-cols-2 gap-4 m-4 text-4xl\">\n        <div className=\"h-24 p-3\">\n          <div className=\"sm:col-span-3\">\n            <div\n              className=\"block text-sm font-medium leading-6 text-gray-900\"\n            >\n              标题\n            </div>\n            <div className=\"mt-2\">\n              <input\n                name=\"title\"\n                type=\"text\"\n                disabled\n                onChange={(e) => setTitle(e.target.value)}\n                defaultValue={title}\n                autoComplete=\"given-name\"\n                className=\"px-3 block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n              />\n            </div>\n          </div>\n        </div>\n        <div className=\"h-24 p-3\">\n          <div\n            className=\"block text-sm font-medium leading-6 text-gray-900\"\n          >\n            类型\n          </div>\n          <div className=\"grid mt-2\">\n            <select\n              name=\"category\"\n              disabled\n              value={category}\n              onChange={(e) => setCagetory(e.target.value)}\n              autoComplete=\"category-name\"\n              className=\"px-3 appearance-none row-start-1 col-start-1 block w-full text-base max-w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 focus:ring-2 focus:ring-inset focus:ring-indigo-600\"\n            >\n              {data && data.data.map((c) => {\n                  return (\n                    <option key={c.id} value={c.id}>\n                      {c.alias}\n                    </option>\n                  );\n                })}\n            </select>\n          </div>\n        </div>\n        <div className={`p-3 col-span-2`}>\n          <div className=\"p-4 shadow-xl\">\n            <div\n              className={`\n                  prose\n                  prose-slate\n                  prose-h2:mt-0\n                  prose-h3:mt-0\n                  prose-h4:mt-0\n                  max-w-full\n                  prose-code:rounded-md\n                  prose-code:before:content-none \n                  prose-code:after:content-none\n                  prose-p:before:content-none \n                  prose-p:after:content-none\n                  prose-hr:my-4\n                `}\n              ref={markdownRef}\n            ></div>\n          </div>\n        </div>\n        <div className=\"col-span-2 p-3\">\n          <div className=\"mt-6 space-y-6\">\n            <div className=\"relative flex gap-x-3\">\n              <div className=\"flex items-center h-6\">\n                <input\n                disabled\n                  type=\"checkbox\"\n                  checked={!!published}\n                  onChange={(e) => setPublished(e.target.checked ? 1 : 0)}\n                  className=\"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-600\"\n                />\n              </div>\n              <div className=\"text-sm leading-6\">\n                <div\n                  className=\"font-medium text-gray-900\"\n                >\n                  是否发布\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n\nexport default ViewNote;\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;;AACA;AAAA;AACA;AAAA;;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;AAKA;AAAA;;AACA;AACA;AACA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;;;;;AAIA;;;;;;;;;;;;;;;;;AAIA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;;;;;AAaA;AACA;;;;;;;;;;;;;;;;AAIA;AAAA;AACA;AAAA;AACA;AAAA;;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAGA;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;AAhHA;;AACA;AAKA;;;AANA;AAkHA"}